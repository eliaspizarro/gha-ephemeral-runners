# ==============================================================================
# CONFIGURACIÓN DE ENTORNO - GHA EPHEMERAL RUNNERS (EJEMPLO)
# ==============================================================================
# Este archivo es usado directamente por compose.yaml.
# Copia este archivo a .env y configura los valores según tus necesidades.
# ==============================================================================

## GitHub Token para gestión de runners (obligatorio)
GITHUB_RUNNER_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

## Configuración de Imagen Runner publico (obligatorio)
RUNNER_IMAGE=myoung34/github-runner:latest

## Configuración de Registry para descargas de imágenes (obligatorio)
REGISTRY=localhost
IMAGE_VERSION=latest

## Configuración de Automatización
# AUTO_CREATE_RUNNERS=true       # Opcional - Activar creación automática de runners (default: false)
# RUNNER_CHECK_INTERVAL=300      # Opcional - Verificar nuevos jobs cada X segundos (default: 300)
# RUNNER_PURGE_INTERVAL=300      # Opcional - Purgar runners inactivos cada X segundos (default: 300)
# DISCOVERY_MODE=all             # Opcional - Busca en todos los repos o organization (default: all)

## Configuración de Logging
# LOG_LEVEL=INFO                 # Opcional - Nivel de logging: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
# LOG_VERBOSE=false              # Opcional - Modo verbose con detalles adicionales (default: false)

## Configuración de Puertos
# API_GATEWAY_PORT=8080          # Opcional - Puerto interno del contenedor API Gateway (default: 8080)
# ORCHESTRATOR_PORT=8000         # Opcional - Puerto interno del contenedor Orchestrator (default: 8000)

## CORS Origins (descomentar según entorno)
## Para producción con Nginx Proxy Manager usa https://yourdomain.com
# CORS_ORIGINS=*                 # Opcional - Por defecto acepta cualquier origen (default: *)

## Comando personalizado para runners
## Para ejecutar comandos personalizados en el runner
# RUNNER_COMMAND=bash -c "./bin/Runner.Listener run --startuptype service 2>&1 | tee -a /var/log/runner.log"

## ==============================================================================
## CONFIGURACIÓN DE VARIABLES DE ENTORNO PARA RUNNERS
## ==============================================================================
## Prefijo: runnerenv_ + nombre de la variable que necesita el contenedor RUNNER_IMAGE
## Variables disponibles para sustitución: {scope_name}, {runner_name}, {registration_token}
## Tiempo: {timestamp}, {timestamp_iso}, {timestamp_date}, {timestamp_time}
## Sistema: {hostname}, {orchestrator_id}, {docker_network}
## Entorno: {orchestrator_port}, {api_gateway_port}, {runner_image}, {registry_url}
## GitHub API: {repo_owner}, {repo_name}, {repo_full_name}, {user_login}
## ==============================================================================

# Variables para myoung34/github-runner
runnerenv_REPO_URL=https://github.com/{scope_name}
runnerenv_RUNNER_TOKEN={registration_token}
runnerenv_RUNNER_NAME={runner_name}
runnerenv_RUNNER_WORKDIR=/tmp/github-runner-{repo_owner}-{repo_name}
runnerenv_LABELS=self-hosted,ephemeral,orchestrator-{hostname}
runnerenv_EPHEMERAL=1
runnerenv_DISABLE_AUTO_UPDATE=1

# Variables para ghcr.io/catthehacker/ubuntu:act-22.04 (imagen alternativa)
# runnerenv_GITHUB_TOKEN={registration_token}
# runnerenv_REPO_NAME={scope_name}
# runnerenv_RUNNER_NAME={runner_name}
# runnerenv_RUNNER_WORKDIR=/tmp/work-{repo_name}

# Variables para custom/my-runner (imagen personalizada)
# runnerenv_CUSTOM_REPO_URL=https://github.com/{scope_name}
# runnerenv_CUSTOM_TOKEN={registration_token}
# runnerenv_CUSTOM_NAME={runner_name}
# runnerenv_CUSTOM_WORKDIR=/workspace/{repo_owner}/{repo_name}
# runnerenv_CUSTOM_LABELS=custom,self-hosted,{hostname}

# Ejemplos avanzados de placeholders:
# runnerenv_DEBUG_FILE=/tmp/debug-{repo_name}-{timestamp_time}.log
# runnerenv_CUSTOM_LABELS=self-hosted,ephemeral,{hostname},orchestrator-{orchestrator_port}
# runnerenv_BACKUP_DIR=/backup/{repo_owner}/{timestamp_date}
# runnerenv_RUNNER_GROUP=ephemeral-{orchestrator_id}
